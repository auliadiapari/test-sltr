name: Docker Image CI

on:
    # Use this for manually run/trigger the workflow
    [workflow_dispatch]

    # # Use this fo automatically specifi run/trigger when changes in src/
    # push:
    #     branches:
    #         - main
    #     paths:
    #         - 'src/**'

jobs:

  build:

    runs-on: ubuntu-latest

    steps:
    - name: Checkout
      uses: actions/checkout@v4

    - name: Build image
      run: docker build -f ./src/Dockerfile -t welcome:latest .

    - name: Tag image
      run: docker tag welcome:latest welcome:1.0.0

    - name: Push image to docker hub
      run: |
        docker login -u auliardd -p ${{ secrets.DOCKER_HUB_TOKEN }}
        docker push auliardd/welcome:latest
        docker push auliardd/welcome:1.0.0
